# STM32. Управление светодиодом c ПК через UART и кнопкой.
### Простой пример проекта на STM32F103C8T6 без использования HAL или LL, только на регистрах (CMSIS), демонстрирующий:

- Управление светодиодом (PB1) с помощью UART-команд;
- Отправку строки `"button pressed"` при нажатии кнопки (PA1);
- ПО для моделирования, анализа и электронного проектирования, в частности для систем на базе микроконтроллеров.

[Видеодемонстрация работы](https://youtu.be/G3csShAZcrc) программы в Proteus 8 Pro.  
[Подключение ST-LINK V2](./docs/STLinkV2.jpg)  
[Подключение USB-UART CH340G](./docs/usbUART.jpg)  

## Используемые контакты ввода\вывода (GPIO)

```
| Назначение | Пин  |
|------------|------|
| Кнопка     | PA1  |
| Светодиод  | PB1  |
| UART TX    | PA9  |
| UART RX    | PA10 |
```
## Логика работы программы

- Если по UART приходит `'1'`, загорается светодиод (PB1);
- Если по UART приходит `'2'`, светодиод гаснет;
- При нажатии кнопки (активный низ), строка `"button pressed\r\n"` отправляется по UART.

## Платформа и инструменты

- MCU: STM32F103C8T6 ("Blue Pill")
- Скорость UART: 115200 бод 8N1
- Работа "на регистрах" CMSIS
- Простая антидребезговая задержка
- Отладка ST-Link V2

## Структура проекта
```
stm32_uart_only_registors/
├── Core/                  # Исходники и заголовки проекта
│   ├── Inc/               # Заголовочные файлы (.h)
│   └── Src/               # Исходные файлы (.c)
├── .gitignore             # Исключения Git
└── README.md              # Документация
```

## Как прошить и протестировать

1. Открыть проект в STM32CubeIDE.
2. Собрать (`Ctrl + B`).
3. Подключить ST-Link и прошить (`Run → Debug` / `Ctrl + F11`).
4. Подключить преобразователь USB-UART CH340G.
5. Открыть терминал (я использовал UART Assistant v5.0.1) 

### Настройки UART Assistant

- Channel: выбрать тот COM-Port, к которому подключен USB-UART преобразоватьель.
- Baud rate: 115200.
- Data bits: 8.
- Stop bit: 1.
- Parity: None.
- Flowctrl: None.

## Связанные проекты

- [STM32 ADC + UART (HAL)](https://github.com/Metabolisto/stm32-adc-uart-hal)
- [STM32 DHT11 UART](https://github.com/Metabolisto/stm32_dht11_uart) 